<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NOTAMS</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Comic+Sans+MS:wght@700&display=swap');

        #title {
            text-align: center;
            font-size: 48px;
        }

        .notam-title {
            text-align: left;
            font-size: 36px;
            margin-bottom: 20px;
        }

        .link-container {
            text-align: right;
            margin-bottom: 10px;
            font-size: 24px;
            position: relative;
        }

        .link-container a:nth-child(1) {
            position: relative;
            left: -300px;
        }

        .link-container a:nth-child(2) {
            position: relative;
            left: -200px;
        }

        .link-container a:nth-child(3) {
            position: relative;
            left: -100px;
        }

        #startButton {
            padding: 10px 20px;
            background-color: red;
            color: white;
            border: 1px solid #ccc;
            cursor: pointer;
            margin: 5px;
            position: absolute;
            left: -400px;
            transition: background-color 0.3s, color 0.3s;
        }

        #startButton:hover {
            background-color: #e0e0e0;
            color: black;
        }

        #notam-description {
            text-align: left;
            font-size: 30px;
        }

        .dropzone-container {
            text-align: left;
            margin: 5px;
        }

        .dropzone {
            padding: 5px;
            min-width: 50px;
            min-height: 50px;
            background-color: #f4f4f4;
            border: 4px dashed #ccc;
            margin-bottom: 25px;
            font-size: 24px;
            font-family: 'Comic Sans MS', sans-serif;
            font-weight: bold;
        }

        #resetButton {
            padding: 10px 20px;
            background-color: red;
            color: white;
            border: 1px solid #ccc;
            cursor: pointer;
            margin: 5px;
            transition: background-color 0.3s, color 0.3s;
        }

        #resetButton.normal {
            background-color: white;
            color: black;
        }

        #resetButton:hover {
            background-color: #e0e0e0;
            color: black;
        }

        #backButton, #nextButton, #finishButton, #finButton, #finalFinishButton {
            padding: 10px 20px;
            background-color: #f8f8f8;
            border: 1px solid #ccc;
            cursor: pointer;
            margin: 5px;
            transition: background-color 0.3s;
        }

        #backButton:hover, #nextButton:hover, #finishButton:hover, #finButton:hover, #finalFinishButton:hover {
            background-color: #e0e0e0;
        }

        #finalFinishButton {
            background-color: red;
            color: white;
            font-weight: bold;
        }

        #correctNotam {
            font-size: 32px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>

<h2 id="title">NO<a id="hiddenLink" href="#" class="hidden-link" style="text-decoration: none; color: inherit;">T</a>AM Structure</h2>
<div class="link-container">
    <button id="startButton">START</button>
    <a href="https://www.faa.gov/documentLibrary/media/Order/7930.2T_Bsc_dtd_12_14_23_FINAL.pdf" target="_blank">7930.2T</a>
    <a href="https://notams.aim.faa.gov/en2_samples.pdf" target="_blank">ENII Samples</a>
    <a href="https://www.faa.gov/air_traffic/flight_info/aeronav/digital_products/dafd/" target="_blank">Chart Supp</a>
</div>
<p id="notam-title" class="notam-title">NOTAM 1</p>
<p id="notam-description" class="description-text">
    As the bitter Alaskan winter began to settle in, a dedicated state employee picked up the phone to report a crucial update to flight service. 
    "Hello, I need to inform you that Talkeetna Runway One Eight Three Six is currently experiencing an issue. The runway edge lights are out of service," 
    he explained, his voice tinged with concern. "This situation will persist from now until the end of December," he continued, glancing at his notes for 
    confirmation. "Please make sure this is communicated to all relevant parties, as it affects our operations through the end of Zulu time." The gravity 
    of the message was clear, and he knew it would require pilots to exercise additional caution in the dark, frigid months ahead.
</p>  
<p id="page1-note" class="description-text" style="font-size: 18px;">(the default NOTAM # will be 06/005 and default start date/time will be 2406121200)</p>

<div class="dropzone-container">
    <input class="dropzone" id="dropzone" type="text" data-correct="!TKA 06/005 TKA RWY 18/36 REDL U/S 2406121200-2412312359" style="width:1500px;">
</div>

<div class="button-container">
    <button id="resetButton">Reset</button>
    <button id="backButton" style="display: none;">Back</button>
    <button id="nextButton" style="display: none;">Next</button>
    <button id="finishButton" style="display: none;">FINISH</button>
    <button id="finButton" style="display: none;">Finish</button>
    <button id="finalFinishButton" style="display: none;" onclick="handleFinalFinishButtonClick()">FINISH</button>
</div>

<div id="correctNotam" style="display: none;">!TKA 06/005 TKA RWY 18/36 REDL U/S 2406121200-2412312359</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const hiddenLink = document.getElementById("hiddenLink");
        const notamTitleElement = document.getElementById("notam-title");
        const descriptionElement = document.getElementById("notam-description");
        const dropzone = document.getElementById("dropzone");
        const nextButton = document.getElementById("nextButton");
        const backButton = document.getElementById("backButton");
        const finishButton = document.getElementById("finishButton");
        const finButton = document.getElementById("finButton");
        const finalFinishButton = document.getElementById("finalFinishButton");
        const notamDisplay = document.getElementById("correctNotam");
        const resetButton = document.getElementById("resetButton");
        const startButton = document.getElementById("startButton");

        const page1Description = "As the bitter Alaskan winter began to settle in, a dedicated state employee picked up the phone to report a crucial update to flight service. \"Hello, I need to inform you that Talkeetna Runway One Eight Three Six is currently experiencing an issue. The runway edge lights are out of service,\" he explained, his voice tinged with concern. \"This situation will persist from now until the end of December,\" he continued, glancing at his notes for confirmation. \"Please make sure this is communicated to all relevant parties, as it affects our operations through the end of Zulu time.\" The gravity of the message was clear, and he knew it would require pilots to exercise additional caution in the dark, frigid months ahead.";
        
        let currentPage = 1;
        let savedValues = {};

        function checkAnswer() {
            if (dropzone.value === dropzone.getAttribute("data-correct")) {
                notamDisplay.style.display = "block";
                nextButton.style.display = "inline-block";
            }
            saveCurrentValues();
        }

        function resetPage() {
            dropzone.value = "";
            notamDisplay.style.display = "none";
            nextButton.style.display = "none";
            finishButton.style.display = "none";
            finButton.style.display = "none";
            finalFinishButton.style.display = "none";
            hideAllNotes();
            savedValues = {};
            localStorage.clear();

            // Change the Reset button style back to normal after clicking it
            resetButton.classList.add('normal');
        }

        function handleStartButtonClick() {
            resetPage();
            startButton.style.display = "none";
        }

        function goToPage(pageNumber) {
            saveCurrentValues();
            clearCurrentPage();
            if (pageNumber === 1 && startButton.style.display !== "none") {
                startButton.style.display = "block";
            }
            switch (pageNumber) {
                case 1:
                    notamTitleElement.innerText = "NOTAM 1";
                    descriptionElement.innerText = page1Description;
                    document.getElementById("page1-note").classList.remove("hidden");
                    backButton.style.display = "none";
                    dropzone.setAttribute("data-correct", "!TKA 06/005 TKA RWY 18/36 REDL U/S 2406121200-2412312359");
                    notamDisplay.innerText = "!TKA 06/005 TKA RWY 18/36 REDL U/S 2406121200-2412312359";
                    break;
                // other cases for different pages (2-5) would go here
            }
            currentPage = pageNumber;
            restoreSavedValues();

            if (currentPage === 1) {
                resetButton.classList.remove('normal');
            }
        }

        function saveCurrentValues() {
            savedValues[currentPage] = {
                dropzoneValue: dropzone.value,
                notamDisplayText: notamDisplay.innerText,
                notamDisplayStyle: notamDisplay.style.display,
                nextButtonStyle: nextButton.style.display,
                finishButtonStyle: finishButton.style.display,
                finButtonStyle: finButton.style.display,
                finalFinishButtonStyle: finalFinishButton.style.display
            };
            localStorage.setItem(`page${currentPage}DropzoneValue`, dropzone.value);
            localStorage.setItem(`page${currentPage}NotamDisplay`, notamDisplay.style.display);
            localStorage.setItem(`page${currentPage}NextButton`, nextButton.style.display);
            localStorage.setItem(`page${currentPage}FinishButton`, finishButton.style.display);
            localStorage.setItem(`page${currentPage}FinButton`, finButton.style.display);
            localStorage.setItem(`page${currentPage}FinalFinishButton`, finalFinishButton.style.display);
        }

        function restoreSavedValues() {
            if (savedValues[currentPage]) {
                dropzone.value = savedValues[currentPage].dropzoneValue;
                notamDisplay.innerText = savedValues[currentPage].notamDisplayText;
                notamDisplay.style.display = savedValues[currentPage].notamDisplayStyle;
                nextButton.style.display = savedValues[currentPage].nextButtonStyle;
                finishButton.style.display = savedValues[currentPage].finishButtonStyle;
                finButton.style.display = savedValues[currentPage].finButtonStyle;
                finalFinishButton.style.display = savedValues[currentPage].finalFinishButtonStyle;
            }
            const pageDropzoneValue = localStorage.getItem(`page${currentPage}DropzoneValue`);
            if (pageDropzoneValue) {
                dropzone.value = pageDropzoneValue;
            }
            const pageNotamDisplay = localStorage.getItem(`page${currentPage}NotamDisplay`);
            if (pageNotamDisplay) {
                notamDisplay.style.display = pageNotamDisplay;
            }
            const pageNextButton = localStorage.getItem(`page${currentPage}NextButton`);
            if (pageNextButton) {
                nextButton.style.display = pageNextButton;
            }
            const pageFinishButton = localStorage.getItem(`page${currentPage}FinishButton`);
            if (pageFinishButton) {
                finishButton.style.display = pageFinishButton;
            }
            const pageFinButton = localStorage.getItem(`page${currentPage}FinButton`);
            if (pageFinButton) {
                finButton.style.display = pageFinButton;
            }
            const pageFinalFinishButton = localStorage.getItem(`page${currentPage}FinalFinishButton`);
            if (pageFinalFinishButton) {
                finalFinishButton.style.display = pageFinalFinishButton;
            }

            if (currentPage === 1 && startButton.style.display !== "none") {
                dropzone.value = "";
            }
        }

        function clearCurrentPage() {
            dropzone.value = "";
            notamDisplay.style.display = "none";
            nextButton.style.display = "none";
            finishButton.style.display = "none";
            finButton.style.display = "none";
            finalFinishButton.style.display = "none";
            hideAllNotes();
        }

        function hideAllNotes() {
            document.getElementById("page1-note").classList.add("hidden");
        }

        startButton.addEventListener("click", handleStartButtonClick);
        dropzone.addEventListener("input", checkAnswer);

        resetButton.addEventListener("click", resetPage);
        nextButton.addEventListener("click", function() {
            goToPage(currentPage + 1);
        });
        backButton.addEventListener("click", function() {
            goToPage(currentPage - 1);
        });

        hiddenLink.addEventListener("click", function(event) {
            event.preventDefault();
            if (currentPage < 5) {
                goToPage(currentPage + 1);
            }
        });

        const previousPage = localStorage.getItem('previousPage');
        if (previousPage) {
            goToPage(parseInt(previousPage));
            localStorage.removeItem('previousPage');
        } else {
            goToPage(1);
        }

        titleElement.innerText = "NOTAM Structure";
        notamTitleElement.innerText = "NOTAM 1";
        descriptionElement.innerText = page1Description;
    });
</script>

</body>
</html>
